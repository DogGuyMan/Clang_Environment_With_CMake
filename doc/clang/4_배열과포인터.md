
---

## 4-1. 2μ°¨μ› λ°°μ—΄κ³Ό ν¬μΈν„°

---

> ### π“„ 1. λ°°μ—΄κ³Ό μ£Όμ† κ΄€κ³„

<div align=center>  
    <img src="image/2024-10-20-00-10-32.png">
</div>

```c  
int data[0][3] = {1, 3, 4, 5, 2, 9, 6, 8, 7}; // 3μ—΄
int *p = data[1];
int x, y;
x = *p;
y = *(p + 2);
printf("%d, %d", x, y);
```



> ### π“„ 2. λ°°μ—΄ `[]`κ³Ό ν¬μΈν„° `*`

##### β‘  `[]` : λ³µμμ λ©”λ¨λ¦¬ κ³µκ°„ λΈ”λ­μ΄ ν• λ‹Ήλ μƒνƒ
* `[]`λ” μΌμΆ…μ μ—°μ‚°μλ΅, Brackets (array subscript)λΌκ³  λ¶λ¦°λ‹¤. `a[10] == *(a + 10)`
* `char name[64] = "Hello Jhon"` μ΄κ±΄ μ¤νƒ ν• λ‹Ή μ¤νΈλ§μ΄λ‹¤.

##### β‘΅ `*`  λ°°μ—΄μ μ²« μ‹μ‘ μ£Όμ†κ°’μ„ μ €μ¥ν•κΈ° μ„ν•΄ ν•λ‚ ν• λ‹Ήλ μƒνƒ 
* μ €μ¥ κ³µκ°„ ν¬κΈ°λ” μ• μ μ—†λ‹¤
* `*`λ” λ§μ°¬κ°€μ§€λ΅ μΌμΆ…μ μ—°μ‚°μλ΅ Dereference λΌκ³  λ¶λ¦°λ‹¤.
* `char *str = "Hello, world!";`     
    μ΄κ±΄ λ¬Έμμ—΄ λ¦¬ν„°λ΄ μ΄λΌλ” κ²ƒμΌλ΅ μ½κΈ° μ „μ© λ©”λ¨λ¦¬μ— μ €μ¥λλ‹¤. 
    κ·Έλ¦¬κ³  μ΄ λ©”λ¨λ¦¬λ¥Ό μμ •ν•λ”κ²ƒμ€ μ •μλμ§€ μ•λ”λ‹¤.

##### λΉ„κµ ν•­λ©
  | /   | λ°°μ—΄ `[]` | ν¬μΈν„° `*`|
  | --- | --- | --- |
  | ν¬κΈ°        | κ³ μ •λ λ©”λ¨λ¦¬ λΈ”λ΅   | μ£Όμ†κ°’ ν•λ‚                |
  | μ΄λ¦„        | μƒμ (λ³€κ²½ λ¶κ°€)     | λ³€μ (λ‹¤λ¥Έ μ£Όμ† μ €μ¥ κ°€λ¥) |
  | sizeof(arr) | μ „μ²΄ ν¬κΈ°            | ν¬μΈν„° ν¬κΈ°                |

> ### π“„ 3. λ°°μ—΄μ ν–‰ μ—΄ ν¬κΈ° λ³€ν™

#### 1). C

```c
int arr[2][3] = {1, 2, 3, 4, 5, 6}; // 2ν–‰3μ—΄
int (*p)[2] = NULL; // 2μ—΄λ΅ λ§λ“¤μ–΄λΌ
p = arr;
printf("%d,", *(p[0] + 1) + *(p[1] + 2));
printf("%d,", *(*(p + 1) + 0) + *(*(p + 1) + 1));
```
```c
int (*p)[N];
int *r[N];
p = (int (*)[N])malloc(N * N * sizeof(int));

// μ—¬κΈ°μ„ 2μ°¨μ› λ°°μ—΄μ„ 1μ°¨μ› λ°°μ—΄μ ν¬μΈν„°λ΅ μΊμ¤ν… ν• λ•, κ΄„νΈλ¥Ό μ κ±°ν•΄μ„λ” μ•λλ‹¤.
// (*p)[N] != *r[N] μ΄ λ‘μ΄ λ‚νƒ€λ‚΄λ” λ°”λ” λ‹¤λ¥΄λ‹¤.
    // rμ€ "int *" νƒ€μ…μ΄ Nκ° μλ‹¤λ”κ²ƒμ΄κ³ 
    // pλ” "int[]" νƒ€μ…μ„ λ νΌλ°μ‹± ν•λ”κ²ƒμ΄λ‹¤.
```

<div align=center>  
    <img src="image/2024-10-20-00-10-59.png"><img src="image/2024-10-20-00-11-06.png">
</div>

#### 2). C++ 

> C allows implicit conversions to/from void*, 
which C++ does not. You need to cast to the correct type.

```cpp
int arr[1][36] = {0, };

int N = 36;
for(int i = 1; i < N; i++) arr[0][i] = i;

int (*p1)[2] = reinterpret_cast<int (*)[2]>(arr); 
```

#### 3). 2μ°¨μ› λ°°μ—΄μ„ 1μ°¨μ› ν¬μΈν„° λ°°μ—΄λ΅

```c
b[i][j] = *( <b[i]> + j);
b[i][j] = '(*(b + i))'[j];
b[i][j] = *( <'(*(b + i))'> + j);

b[5][2] μ΄λ€ λ°°μ—΄μ΄ μμΌλ©΄
b[i][j] = *( b + (5 * i) + (j) );
b[i][j] = *( &b[0][0] + (5 * i) + (2));

c[10][7][13]μ΄λ€ λ°°μ—΄μ΄ μμΌλ©΄
c[i][j][k] = * (&c[0][0][0] + 
                    (7 * 13 * i) + 
                    (13 * j) + 
                    (k))
```

#### [Code : ArrayRowCol](./src/PointerNReference/ArrayRowCol.cpp)

----

## 4-2. λ°°μ—΄μ μ‚¬μ΄μ¦μ™€ ν¬μΈν„°

---

```c
void ArraySize() {
    int a[N] = {0,};
    int b[N][N] = {0,};

    cout << sizeof(a[N]) << endl;       // 4
    cout << sizeof(a) << endl;          // 40
    cout << sizeof(b[N][N]) << endl;    // 4
    cout << sizeof(b[N]) << endl;       // 40
    cout << sizeof(b) << endl;          // 400
}
```
```c
void ArrayColOutofBound() {
    int a[3][3] = {0,};
    // sizeof(a) / sizeof(int) = Array2d'sSize
    for(int i = 0; i < sizeof(a) / sizeof(int); i++) 
    {
        a[0][i] = i; // μ΄κ±° κ°€λ¥ν•λ‹¤!
    }
    for(int i = 0; i < 3; i++) {
        for(int j = 0; j < 3; j++) {
            cout << a[i][j] << endl;
        }
    }
}
```

> ### π“„ 5. μ¤νƒ ν• λ‹Ή λ°°μ—΄

* λ°°μ—΄μ— μν• λ©”λ¨λ¦¬ ν• λ‹Ήμ κ°€μ¥ ν° μ¥μ μ€ ν•΄μ  κ³Όμ •μ΄ ν•„μ”μ—†λ‹¤??
    * λ°°μ—΄μ κ²½μ° μ •μ  ν• λ‹Ήμ‹ 
    * μ΄λ―Έ ν•΄λ‹Ή μ‘μ—… κ³µκ°„μ„ ν• λ‹Ήν•΄ μμΌλ―€λ΅ λ©”λ¨λ¦¬ μ‚¬μ©μ—μ μ•½μ΄ κ°€μ Έμ¬ μ μμµλ‹λ‹¤.

#### 1). C/C++

* λ°°μ—΄μ λ©”λ¨λ¦¬ ν• λ‹Ή
    1. μ „μ—­μ  μ •μ : static λ©”λ¨λ¦¬
    2. ν•¨μ λΈ”λ­ μ •μ : stack λ©”λ¨λ¦¬
       * λ”°λΌμ„ malloc, calloc μ„ ν†µν•΄μ„ ν• λ‹Ήν•μ§€ μ•μ•λ‹¤λ©΄ free ν•΄μ£Όλ©΄ μ•λλ‹¤
       * ν•¨μ μΆ…λ£μ‹ μ‚­μ λλ‹¤.

* μ¤νΈλ§ λ©”λ¨λ¦¬ ν• λ‹Ή

#### 2). C#

* λ°°μ—΄μ λ©”λ¨λ¦¬ ν• λ‹Ή
    `Span`μ„ ν†µν• stack alloc μΌλ΅ μ¤νƒν• λ‹Ή λ°°μ—΄μ΄ μ‚¬μ© κ°€λ¥ν•λ‹¤.

* `List<T>` λ‹¤λ¥Έ κ²ƒλ“¤μ€ λ¨λ‘ Heapμ— ν• λ‹Ήλλ‹¤
    λ€μ‹  μ»¨ν…μ΄λ„ ν’€μ„ μ‚¬μ©ν•λ©΄ C/CPP μ²λΌ ν• λ‹Ή ν•΄μ μ™€ κ²,λ¦΄λ¦¬μ¦κ°€ λ€μ‘λλ‹¤.

* μ¤νΈλ§ λ©”λ¨λ¦¬ ν• λ‹Ή (ν™)
    ```cpp
    char *str = (char *)malloc(100 * sizeof(char));
    if (str != NULL) {
        strcpy(str, "Hello, world!");
    }
    ```

---

https://people.eecs.ku.edu/~jrmiller/Courses/JavaToC++/StackAllocatedObjects.html
https://onesside-world.tistory.com/44
https://www.geeksforgeeks.org/c/operators-in-c/