## 1. ë©”ëª¨ë¦¬ í• ë‹¹ê³¼ ì ìœ 

---

> ### ğŸ“„ 1. í• ë‹¹ (Allocation)

#### ìš´ì˜ì²´ì œê°€ ë©”ëª¨ë¦¬ì— íŠ¹ì • í¬ê¸°ì˜ ë©”ëª¨ë¦¬ ë¸”ë¡ì„ ì˜ˆì•½í•˜ëŠ” ê³¼ì •

```c
int val; // 0x1000~0x1003 ê¹Œì§€ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì°¨ì§€í• ë•Œ,
```

1. ë³€ìˆ˜ xë¥¼ ìœ„í•´ 0x1000~0x1003 ê¹Œì§€ ë©”ëª¨ë¦¬ ê³µê°„ì´ ì˜ˆì•½ë˜ì–´ ìˆëŠ” ìƒíƒœë‹¤.
2. ì´ë ‡ê²Œ ì˜ˆì•½ì´ ë˜ì—ˆë‹¤ë©´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ”ê²ƒì„ ë³´ì¥í•œë‹¤.
3. ì´ ì‹œì ì—ì„œëŠ” ì‹¤ì œ ë°ì´í„°ëŠ” ì—†ëŠ” ì“°ë ˆê¸° ê°’ì´ ë“¤ì–´ê°€ ìˆë‹¤.

---

> ### ğŸ“„ 2. ì ìœ  (Occupation)

#### CPUê°€ ì˜ˆì•½ëœ ë©”ëª¨ë¦¬ ë¸”ëŸ­ì— ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ ì €ì¥ë˜ëŠ” ê³¼ì •.

```c
val = 10; // 0x0000000A (10ì˜ ì´ì§„ í‘œí˜„)ì´ë€ ì˜ë¯¸ìˆëŠ” ë°ì´í„°ë¥¼ ê¸°ë¡
```

1. CPU ë ˆì§€ìŠ¤í„°ì—ì„œ ì‹œì‘í•´ì„œ
ìºì‹œ ê³„ì¸µ(L1, L2, L3) êµ¬ì¡°ë¥¼ ê±°ì³ (Cache Write Hit ì •ì±…)ì— ë”°ë¼.
ì‹¤ì œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ê¹Œì§€ ë°ì´í„°ë¥¼ ì „ì†¡
2. ë°ì´í„° ì „ì†¡ì„ ë§ˆì³¤ë‹¤ë©´ ì˜ˆì•½ëœ ë©”ëª¨ë¦¬ ë¸”ëŸ­ì— 0x0000000A (10ì˜ ì´ì§„ í‘œí˜„)ì´ë€ ì˜ë¯¸ìˆëŠ” ë°ì´í„°ë¥¼ ê¸°ë¡í•œë‹¤.
3. ì´ë ‡ê²Œ ì ìœ ëœ ìƒíƒœë¼ëŠ” ê²ƒì¸ ìì›ì´ ì‚¬ìš©ì¤‘** ì´ë¼ëŠ” ë‹¤ë¥¸ í‘œí˜„ìœ¼ë¡œë„ ë¶€ë¥´ê¸°ë„ í•˜ê³ , ìì›ì„ í•´ì œë˜ì§€ ì•ŠëŠ”ë‹¤.

---

> ### ğŸ“„ 3. ì‹œìŠ¤í…œ ê´€ì ì—ì„œì˜ ì°¨ì´ì 

| êµ¬ë¶„ | í• ë‹¹ (Allocation) | ì ìœ  (Occupation) |
|---|---|---|
| ì£¼ì²´ | ë©”ëª¨ë¦¬ ê´€ë¦¬ì (OS/ì»´íŒŒì¼ëŸ¬) | CPU/í”„ë¡œê·¸ë¨ |
| ì‘ì—… | ë³€ìˆ˜ ì„ ì–¸ ì‹œ ì£¼ì†Œ ê³µê°„ ì˜ˆì•½ | ê°’ ëŒ€ì… ì‹œ, ì‹¤ì œ ë°ì´í„° ì €ì¥ |

---

> ### ğŸ“„ 4. ì •ì í• ë‹¹ê³¼ ë™ì  í• ë‹¹

#### 1). ì •ì  í• ë‹¹

* **íƒ€ì´ë°?**
  * **í• ë‹¹** : ì»´íŒŒì¼ íƒ€ì„, í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ì§ì „ì— ë©”ëª¨ë¦¬ ë¸”ëŸ­ì„ ê³ ì •ì ìœ¼ë¡œ ì˜ˆì•½í•˜ê±°ë‚˜, ë¯¸ë¦¬ ê³„ì‚°ì„ í•œë‹¤.
  * **í•´ì œ** :
    * `static`, `global` ë³€ìˆ˜ë¼ë©´ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ ìƒì‹œ ì ìœ ëœë‹¤. ì •ì í• ë‹¹ëœ ë©”ëª¨ë¦¬ ê³µê°„ì€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì‚¬ìš©ë  ì¼ì´ ì ˆëŒ€ë¡œ ì—†ë‹¤.
    * í•˜ì§€ë§Œ, í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìœ ìš”í•œ `local` `parameter` ê°™ì€ ê²½ìš°ë¼ë©´ stackì—ì„œ ë¹ ì ¸ë‚˜ê°ˆë•Œ, í•´ì œëœë‹¤.
* **ì–´ë””ì—?**
  * í•¨ìˆ˜ë‚´ ì§€ì—­,ë§¤ê°œë³€ìˆ˜ë©´ **Stack** ë©”ëª¨ë¦¬ ë¸”ëŸ­ì„ ì˜ˆì•½í•˜ëŠ” ê²ƒ
  * ì „ì—­, ì •ì (`static`) ë³€ìˆ˜ë©´ **Data** ë©”ëª¨ë¦¬ ë¸”ëŸ­ì„ ì˜ˆì•½í•˜ëŠ” ê²ƒ
* ë”°ë¼ì„œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ì¤‘ì— í•´ì œê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ í–ˆì§€?
  í˜¹ì€ í•¨ìˆ˜ë‚´ ì§€ì—­ ë³€ìˆ˜ë©´ ëª¨ë¥¼ê¹Œ.. ìŠ¤ì½”í”„ ìµœìƒë‹¨ì˜ ì „ì—­ ë³€ìˆ˜ì— ì•„ì£¼ í° ê°’ì„ í• ë‹¹í•˜ë©´, ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ë¥¼ ì´ˆê³¼í•˜ê±°ë‚˜ ë‚­ë¹„í•  ìˆ˜ ìˆë‹¤.

#### 2). ë™ì  í• ë‹¹

* **íƒ€ì´ë°?**
  * **í• ë‹¹** : ëŸ°íƒ€ì„ì— í”„ë¡œì„¸ìŠ¤ê°€ ëŒì•„ê°€ëŠ” ì¤‘ì— ë©”ëª¨ë¦¬ ë¸”ëŸ­ì„ ì˜ˆì•½í•˜ëŠ” ê²ƒ ì´ë‹¤. `malloc` `new`
    *ì •ì  í• ë‹¹ íƒ€ì´ë°ì— ìˆ˜í–‰í•˜ì§€ ëª»í•˜ì˜€ê¸° ë•Œë¬¸ì—*
  * **í•´ì œ** : í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ë•Œ ëª¨ë“  ìì›ì„ íšŒìˆ˜í•˜ê¸°ë„ í•˜ì§€ë§Œ,
  ëŸ°íƒ€ì„ ì¤‘ì— í• ë‹¹ë˜ëŠ”ê²ƒì´ ê°€ëŠ¥í–ˆê¸° ë–„ë¬¸ì— ê·¸ ë°˜ëŒ€ë„ ë§ˆì°¬ê°€ì§€ë¡œ **ëŸ°íƒ€ì„ ì¤‘ì— í•„ìš” ì—†ì„ë•Œ, ëª…ì‹œì ìœ¼ë¡œ í•´ì œ ë˜ì•¼í•œë‹¤** `free` `delete`
  ê·¸ë ‡ê²Œ ëœë‹¤ë©´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì´ë¥¼ ì¬í™œìš© í•  ìˆ˜ ìˆë‹¤.
* **ì–´ë””ì—?** : **Heap** ë©”ëª¨ë¦¬ì— ê°’ì„ ì˜ˆì•½í•˜ëŠ” ê²ƒ
* ë”°ë¼ì„œ, í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ì¤‘ì— í• ë‹¹ í•´ì œê°€ ê°€ëŠ¥í•˜ê³ , í• ë‹¹ í¬ê¸°ë„ í¬ì§€ë§Œ, ì˜ëª» ê´€ë¦¬í•˜ë©´ memory leakì´ ë°œìƒí•œë‹¤.

---

> ### ğŸ“„ 5. `malloc & free` VS `new & delete`

#### 1). `new` & `delete`

* `new` : ë©”ëª¨ë¦¬ í• ë‹¹ + ìƒì„±ì
  * ë”±, ì§€ì •ëœ íƒ€ì… í¬ê¸°ë§Œí¼ í•œë²ˆ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê¸° ë•Œë¬¸ì—.
  ì»¨í…Œì´ë„ˆ, ë°°ì—´ê°™ì€ ê²½ìš° forë¬¸ì„ ì‚¬ìš©í•´ ì—°ë‹¬ì•„ í• ë‹¹í•  í•„ìš”ê°€ ìˆë‹¤.
* `delete` : ë©”ëª¨ë¦¬ í•´ì œ + ì†Œë©¸ì
  * ë§ˆì°¬ê°€ì§€ë¡œ forë¬¸ì„ í†µí•´ ì—°ë‹¬ì•„ í•´ì œë¥¼ í•  í•„ìš”ê°€ ìˆë‹¤.

* íŠ¹ì§•
    * ì´ë ‡ê²Œ ë˜ë©´ ë©”ëª¨ë¦¬ í• ë‹¹ í•´ì œ ë¿ë§Œ ì•„ë‹ˆë¼, ì´ˆê¸°í™”(ì ìœ )ê¹Œì§€ ìë™í™” í•´ì¤€ë‹¤.
    * ê·¸ë ‡ë‹¤ë©´ mallocê³¼ freeëŠ” ìœ„ ì¼ë¶€ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ë³´ë©´ ë˜ë‚˜? *ì˜ˆ*

#### 2). `malloc` & `free`

* `malloc` : ë©”ëª¨ë¦¬ í• ë‹¹
  * `malloc`ì´ ë°˜í™˜í•˜ëŠ” íƒ€ì…ì€ `(void *)`ì™€ ê°™ì€
  ì œë„¤ë¦­ í¬ì¸í„°ë¥¼ ë‚´ë³´ë‚¸ë‹¤ ë”°ë¼ì„œ í˜•ë³€í™˜ì´ í•„ìˆ˜ë‹¤.
  * í•˜ì§€ë§Œ, ë©”ëª¨ë¦¬ í• ë‹¹ í¬ê¸°ë¥¼ ìì—°ìˆ˜ í¬ê¸°ë¡œ ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.
* `free` : ë©”ëª¨ë¦¬ í•´ì œ
  * ë§Œì•½ ì˜¤ë¸Œì íŠ¸ê°„ ë³µì¡í•œ ì˜ì¡´ ê´€ê³„ë¡œ ì–½í˜€ ìˆìœ¼ë©°,
  í•´ì œì‹œ ì—°ë‹¬ì•„ ì¬ê·€ì ìœ¼ë¡œ í•´ì œí•´ì•¼ í•˜ëŠ” ë¡œì§ì— ëŒ€ì‘í•˜ê¸° ë§¤ìš° ì–´ë µë‹¤.

#### 3). í‘œ

| **íŠ¹ì§•**     | **`malloc` / `free`** | **`new` / `delete`**               |
|---|---|---|
| **ì–¸ì–´**     | C, C++                | C++                                |
| **ê°ì²´ ì´ˆê¸°í™”** | ì—†ìŒ                    | ìƒì„±ì í˜¸ì¶œë¡œ ê°ì²´ ì´ˆê¸°í™” ê°€ëŠ¥                  |
| **íƒ€ì… ì•ˆì „ì„±** | ì—†ìŒ (í˜•ë³€í™˜ í•„ìš”)           | íƒ€ì… ì•ˆì „ (í˜•ë³€í™˜ í•„ìš” ì—†ìŒ)                  |
| **ë©”ëª¨ë¦¬ í•´ì œ** | `free` í˜¸ì¶œ             | `delete` ë˜ëŠ” `delete[]` í˜¸ì¶œ          |
| **ì˜ˆì™¸ ì²˜ë¦¬**  | ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì‹œ `NULL` ë°˜í™˜   | ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì‹œ `std::bad_alloc` ì˜ˆì™¸ ë°œìƒ |


---

> #### ì°¸ê³ 

* [warfd : c/c++ ì •ë¦¬(27) í¬ì¸í„°](https://blog.naver.com/warfd/223899246058)
* [eludien : ë©”ëª¨ë¦¬ ì˜ì—­, ë™ì  í• ë‹¹, ì •ì  í• ë‹¹ / Code, Data, Heap, Stack / malloc, free, new, delete](https://blog.naver.com/eludien/221462352935)
* https://www.youtube.com/watch?v=vjYF_fAZI5E&list=PLrRW1w6CGAcXbMtDFj205vALOGmiRc82-&index=25&ab_channel=ChrisTerman
* https://arjunsreedharan.org/post/148675821737/memory-allocators-101-write-a-simple-memory
